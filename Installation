Install any Ubuntu version from 20.04 and under. (Cuckoo supports VirtualBox 4.3, 5.0, 5.1, and 5.2)

Cuckoo can be installed on any virtual machine hypervisor of your choice OR on a physical Ubuntu host machine.
For the scope of this project, VMware Workstation Pro 16.2.3 is used.

For hypervisors ==> Ensure that The Virtual Machine has the VT-x capability enabled. 
(To enable nested virtualization within the Ubuntu Linux Virtual Machine)

Ubuntu Virtual Machine Host Setup:
Hypervisor ==> VMware Workstation Pro 16.2.3
Virtual Machine ==> Ubuntu 18.04.06
Storage/Hard Drive Space ==> 200> (Recommeded since we will be performing nested virtualisation with Windows 7 VM using virtualbox)
RAM ==> 6> (Again, Windows 7 VM requires 4 or more GB of RAM to avoid detect by malware, ensure enough for both Ubuntu Host and VM)

Once done, log in to the VM.

Launch the terminal:
$ sudo apt-get update && sudo apt-get upgrade (Update the Ubuntu Packages)
*If you are using a Hypervisor, you might want to create a snapshot after the packages has been upgraded

As of now Cuckoo fully supports only python2.7, hence Python2.7 is needed to be installed on the VM
Cuckoo also requires other software packages and python dependencies to install & function properly

In a new terminal:
$ sudo apt-get install python python-pip python-dev libffi-dev libssl-dev
$ sudo apt-get install python-setuptools
$ sudo apt-get install libjpeg-dev zlib1g-dev swig

It is recommended to create a new user to run Cuckoo to avoid security issues with the root user,
though you can use the default root user as well.
Ensure that the same user is used to run Cuckoo and to create and run the VirtualBox VMs (Otherwise Cuckoo won’t be able to identify and launch these Virtual Machines)
* $ sudo adduser cuckoo (Or any name you prefer)
For this project we will be using the root user to perform the installation and analysis (Due to configuration issues, we will not create new user)
(fyp@ubuntu)

sudo apt-get install -y mongodb

cd Downloads/

~/Downloads

git clone https://github.com/volatilityfoundation/volatility.git 

cd volatility

sudo python setup.py build

sudo python setup.py install

sudo apt-get install tcpdump apparmor-utils
sudo aa-disable /usr/sbin/tcpdump

getcap /usr/sbin/tcpdump
=> /usr/sbin/tcpdump = cap_net_admin,cap_net_raw+eip


pip install -U pip setuptools

sudo -H pip install -U cuckoo

cuckoo


CREATING A HOST ONLY NIC adapter

vboxmanage hostonlyif create

vboxmanage hostonlyif ipconfig vboxnet0 --ip 192.168.56.1

(Create nested Windows 7 VM)
run the command:
VBoxManage modifyvm cuckoo1 --nested-hw-virt on

Start the VM and install it.

Once installed:

Edit Group Policy

1. Expand Computer Configuration > Windows Settings > Security Settings > Local Policies > Security Options. Scroll down to the User Account Control options

“User Account Control: Behavior of the elevation prompt for administrators in Admin Approval Mode” ==> Elevate without prompting

User Account Control: Detect application installations and prompt for elevation” ==> Disabled

User Account Control: Run all administrators in Admin Approval Mode” ==> Disabled

2. Computer Configuration > Administrative Templates > Windows Components > Windows Update > Configure Automatic Updates

Select Enabled, 2- Notify for download and notify for install, then click ok

3.Computer Configuration > Administrative Templates > Network > Network connections > Windows Firewall > Domain Profile > Windows Firewall and change “Protect all network connections” ==> Disabled.

4.Computer Configuration > Administrative Templates > Windows Components > Windows Defender Antivirus then set “Turn off Windows Defender Antivirus” ==> Enabled











Launch two terminals 
The first terminal will be used to run and start Cuckoo

cuckoo

In the second terminal type the following to start the web server for the Cuckoo web interface


cuckoo web runserver 0.0.0.0:8080 
OR
cuckoo web --host 127.0.0.1 --port 8080

visit the Cuckoo Web Server via 127.0.0.1:8000 
